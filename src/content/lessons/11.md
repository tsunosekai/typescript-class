---
title: "【作品②】じゃんけんゲームを作ろう"
lesson: 11
goal: "これまでの知識を使ってじゃんけんゲームを完成させる"
time: "約40分"
checklist:
  - "ランダム選択が実装できた"
  - "勝敗判定ができた"
  - "ゲームが動いた"
---


<details>
<summary>💡 AIに質問するときはここをクリック</summary>

ChatGPTやClaudeなどのAIに質問するときは、以下をコピーして最初に貼り付けてね！

```
【TypeScript講座 学習状況】
現在地: 第11回「じゃんけんゲームを作ろう」

■ 学習済みの内容:
- VSCode、ターミナル、Node.js/TypeScript環境
- HTML/CSSの基本、Flexbox
- TypeScriptの変数と型、if文、関数（引数、戻り値、アロー関数）
- 配列:
  - 配列の作り方（const arr: string[] = [...]）
  - インデックスでのアクセス（arr[0]）
  - length, push, pop, shift, unshift
  - forループ、for...of、forEach
  - includes, indexOf, join
- 【作品①】自己紹介ページ
- おみくじプログラム

■ まだ習っていない内容:
オブジェクト、DOM操作（ブラウザでの表示）、イベント処理、React など
※ 今回はコンソール（ターミナル）で動くゲームを作ります

上記の学習状況を踏まえて、初心者にも分かるように答えてください。
まだ習っていない概念は使わないでください。

【質問】
ここに質問を書いてね
```

</details>

> **この回で学ぶこと**
> - これまでの知識を組み合わせる
> - ランダムな選択の実装
> - じゃんけんの勝敗判定
> - コンソールで動くゲームを完成させる

---

## はじめに

ここまでに学んだこと：
- 変数と型
- if文（条件分岐）
- 関数
- 配列

今回は、これらを**全部組み合わせて**、じゃんけんゲームを作ります！

---

## STEP 1: VSCodeでプロジェクトを開く

### 1-1. VSCodeを起動する

デスクトップのVSCodeアイコンをダブルクリックして、VSCodeを起動します。

### 1-2. プロジェクトフォルダを開く

**「ファイル」→「フォルダーを開く」** から、`typescript-lesson` フォルダを開きます。

### 1-3. ターミナルを開く

**「ターミナル」→「新しいターミナル」** をクリック

---

## STEP 2: 完成イメージを確認する

今回作るじゃんけんゲームの動作：

```
=== じゃんけんゲーム ===

あなたの手: グー
コンピュータの手: チョキ

🎉 あなたの勝ち！
```

実行するたびに結果が変わります！

---

## STEP 3: ファイルを作成する

新しいファイル `janken.ts` を作成します。

---

## STEP 4: 手の種類を配列で定義する

まず、じゃんけんの手を配列で定義します。

```typescript
// じゃんけんの手
const hands: string[] = ["グー", "チョキ", "パー"];
```

**`Ctrl + S`** で保存します。

---

## STEP 5: コンピュータの手をランダムに選ぶ

配列からランダムに1つ選ぶ関数を作ります。

```typescript
// じゃんけんの手
const hands: string[] = ["グー", "チョキ", "パー"];

// ランダムに手を選ぶ関数
function getRandomHand(): string {
    const randomIndex = Math.floor(Math.random() * hands.length);
    return hands[randomIndex];
}

// テスト
console.log(getRandomHand());
console.log(getRandomHand());
console.log(getRandomHand());
```

**`Ctrl + S`** で保存して実行：

```
npx ts-node janken.ts
```

毎回違う手が表示されれば成功です！

---

## STEP 6: 勝敗を判定する関数を作る

じゃんけんの勝敗を判定する関数を作ります。

```typescript
// 勝敗を判定する関数
// player: プレイヤーの手
// computer: コンピュータの手
// 戻り値: "win", "lose", "draw" のいずれか
function judge(player: string, computer: string): string {
    // 同じ手なら引き分け
    if (player === computer) {
        return "draw";
    }

    // プレイヤーが勝つパターン
    if (
        (player === "グー" && computer === "チョキ") ||
        (player === "チョキ" && computer === "パー") ||
        (player === "パー" && computer === "グー")
    ) {
        return "win";
    }

    // それ以外は負け
    return "lose";
}
```

---

## STEP 7: 結果を表示する関数を作る

勝敗に応じたメッセージを表示する関数を作ります。

```typescript
// 結果を表示する関数
function showResult(result: string): void {
    if (result === "win") {
        console.log("🎉 あなたの勝ち！");
    } else if (result === "lose") {
        console.log("😢 あなたの負け...");
    } else {
        console.log("🤝 引き分け！");
    }
}
```

---

## STEP 8: ゲームのメイン処理を作る

すべてを組み合わせて、ゲームのメイン処理を作ります。

```typescript
// じゃんけんゲームを実行する関数
function playJanken(playerHand: string): void {
    console.log("=== じゃんけんゲーム ===");
    console.log("");

    // コンピュータの手を決める
    const computerHand = getRandomHand();

    // 手を表示
    console.log(`あなたの手: ${playerHand}`);
    console.log(`コンピュータの手: ${computerHand}`);
    console.log("");

    // 勝敗を判定
    const result = judge(playerHand, computerHand);

    // 結果を表示
    showResult(result);
}

// ゲームを実行（プレイヤーは「グー」を出す）
playJanken("グー");
```

---

## STEP 9: 完成版コード

すべてをまとめると、こうなります：

```typescript
// ==================
// じゃんけんゲーム
// ==================

// じゃんけんの手
const hands: string[] = ["グー", "チョキ", "パー"];

// ランダムに手を選ぶ関数
function getRandomHand(): string {
    const randomIndex = Math.floor(Math.random() * hands.length);
    return hands[randomIndex];
}

// 勝敗を判定する関数
function judge(player: string, computer: string): string {
    // 同じ手なら引き分け
    if (player === computer) {
        return "draw";
    }

    // プレイヤーが勝つパターン
    if (
        (player === "グー" && computer === "チョキ") ||
        (player === "チョキ" && computer === "パー") ||
        (player === "パー" && computer === "グー")
    ) {
        return "win";
    }

    // それ以外は負け
    return "lose";
}

// 結果を表示する関数
function showResult(result: string): void {
    if (result === "win") {
        console.log("🎉 あなたの勝ち！");
    } else if (result === "lose") {
        console.log("😢 あなたの負け...");
    } else {
        console.log("🤝 引き分け！");
    }
}

// じゃんけんゲームを実行する関数
function playJanken(playerHand: string): void {
    console.log("=== じゃんけんゲーム ===");
    console.log("");

    // コンピュータの手を決める
    const computerHand = getRandomHand();

    // 手を表示
    console.log(`あなたの手: ${playerHand}`);
    console.log(`コンピュータの手: ${computerHand}`);
    console.log("");

    // 勝敗を判定
    const result = judge(playerHand, computerHand);

    // 結果を表示
    showResult(result);
}

// ==================
// ゲーム実行
// ==================

// 好きな手を選んで実行してみよう！
// "グー", "チョキ", "パー" のいずれかを入れてね

playJanken("グー");
```

**`Ctrl + S`** で保存して実行：

```
npx ts-node janken.ts
```

結果（毎回変わります）：
```
=== じゃんけんゲーム ===

あなたの手: グー
コンピュータの手: チョキ

🎉 あなたの勝ち！
```

---

## 【作品②完成！】

おめでとうございます！ じゃんけんゲームが完成しました！

使った技術を振り返りましょう：

- **配列**: じゃんけんの手を管理
- **関数**: 処理を分けて整理
- **if文**: 勝敗の判定
- **Math.random()**: ランダムな選択

---

## 改良してみよう

### 3回勝負バージョン

> **復習: `for` ループ**
> 前回学んだ `for` ループを使います。「○回繰り返す」処理ができます。
> ```typescript
> for (let i = 0; i < 3; i++) {
>     // 3回繰り返す処理
> }
> ```

```typescript
// 3回勝負する
function playThreeRounds(): void {
    let wins = 0;
    let losses = 0;
    let draws = 0;

    const playerHands: string[] = ["グー", "チョキ", "パー"];

    console.log("=== じゃんけん3回勝負！ ===");
    console.log("");

    for (let i = 0; i < 3; i++) {
        console.log(`--- ${i + 1}回戦 ---`);

        // プレイヤーもランダムに選ぶ
        const playerHand = playerHands[Math.floor(Math.random() * 3)];
        const computerHand = getRandomHand();

        console.log(`あなた: ${playerHand} / コンピュータ: ${computerHand}`);

        const result = judge(playerHand, computerHand);

        if (result === "win") {
            console.log("→ 勝ち！");
            wins++;
        } else if (result === "lose") {
            console.log("→ 負け...");
            losses++;
        } else {
            console.log("→ 引き分け");
            draws++;
        }
        console.log("");
    }

    console.log("=== 最終結果 ===");
    console.log(`勝ち: ${wins}回 / 負け: ${losses}回 / 引き分け: ${draws}回`);

    if (wins > losses) {
        console.log("🎉 あなたの勝利！");
    } else if (wins < losses) {
        console.log("😢 コンピュータの勝利...");
    } else {
        console.log("🤝 引き分け！");
    }
}

// 3回勝負を実行
playThreeRounds();
```

---

## まとめ

この回でやったこと：

- ✅ 配列でじゃんけんの手を管理した
- ✅ ランダムに手を選ぶ関数を作った
- ✅ 勝敗を判定する関数を作った
- ✅ すべてを組み合わせてゲームを完成させた

---

## 次回予告

次回からは「**第4部：DOM操作とイベント**」に入ります！

「**HTMLをTypeScriptで操作しよう**」で、TypeScriptからHTMLの要素を操作する方法を学びます。

これができると、**ブラウザで動くゲーム**が作れるようになります！

---

## 練習問題（やってみよう）

1. `playJanken("チョキ")` や `playJanken("パー")` で違う手を試してみよう
2. 3回勝負バージョンを5回勝負に変えてみよう
3. 勝った回数が3回以上なら「完全勝利！」と表示してみよう

保存（`Ctrl + S`）を忘れずに！
